<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HMIS</title>

    <!-- css -->
    <link rel="stylesheet" href="../../STATIC/css/table.min.css">
    <link rel="stylesheet" href="../../STATIC/themify/icons/themify-icons.css">

    <link rel="stylesheet" href="../../STATIC/css/styles.css">
    <link rel="stylesheet" href="../../STATIC/css/components.css">
    <link rel="stylesheet" href="../../STATIC/css/utils.css">
    <link rel="stylesheet" href="../../STATIC/icons/font-awesome-4.7.0/css/font-awesome.min.css">

    <!-- js -->
    <script src="../../STATIC/js/jquery-3.5.1.js"></script>
    <script src="../../STATIC/js/jquery.dataTables.min.js"></script>

    <script src="../../STATIC/js/scripts.js"></script>
</head>
<body>
  <header class="departments">
    <a href="../patients/index.html" class="department">
        <img src="../../STATIC/icons/create-patient.png" alt="">
        <span class="department-name">Patients</span>
    </a>
    <a href="../patients/visits.html" class="department">
        <img src="../../STATIC/icons/visits.svg" alt="">
        <span class="department-name">Visits</span>
    </a>
    <a href="../patients/triage.html" class="department">
        <img src="../../STATIC/icons/triage.png" alt="">
        <span class="department-name">Triage</span>
    </a>
    <a href="../cashier/index.html" class="department">
      <img src="../../STATIC/icons/cashier.png" alt="">
      <span class="department-name">Cashier</span>
    </a>
    <a href="../doctor/index.html" class="department">
        <img src="../../STATIC/icons/doctor.png" alt="">
        <span class="department-name">Doctor</span>
    </a>
    <a href="../doctor/laboratory.html" class="department">
      <img src="../../STATIC/icons/lab.png" alt="">
      <span class="department-name">Laboratory</span>
    </a>
    <a href="../cardiology/index.html" class="department">
        <img src="../../STATIC/icons/cardiology.png" alt="">
        <span class="department-name">Cardiology</span>
    </a>
    <a href="../radiology/index.html" class="department">
        <img src="../../STATIC/icons/radiology.png" alt="">
        <span class="department-name">Radiology</span>
    </a>
    <a href="../pharmacy/index.html" class="department">
        <img src="../../STATIC/icons/pharmacy.png" alt="">
        <span class="department-name">Pharmacy</span>
    </a>
    <a href="../app_admin/inventory.html" class="department active">
        <img src="../../STATIC/icons/inventory.png" alt="">
        <span class="department-name">Inventory</span>
    </a>
    <a href="../theatre/index.html" class="department">
        <img src="../../STATIC/icons/theatre.png" alt="">
        <span class="department-name">Theatre</span>
    </a>
    <a href="../doctor/dental.html" class="department">
        <img src="../../STATIC/icons/dental.png" alt="">
        <span class="department-name">Dental</span>
    </a>
    <a href="../patients/appointments.html" class="department">
        <img src="../../STATIC/icons/appointment.png" alt="">
        <span class="department-name">Appointments</span>
    </a>
    <a href="../app_admin/invoices.html" class="department">
        <img src="../../STATIC/icons/invoices.png" alt="">
        <span class="department-name">Invoices</span>
    </a>
    <a href="../app_admin/finances.html" class="department">
        <img src="../../STATIC/icons/finances.png" alt="">
        <span class="department-name">Finances</span>
    </a>
    <a href="../insurance/index.html" class="department">
      <img src="../../STATIC/icons/insurance.png" alt="">
      <span class="department-name">Insurance</span>
  </a>
  <a href="../app_admin/pricing.html" class="department">
    <img src="../../STATIC/icons/insurance.png" alt="">
    <span class="department-name">Pricing</span>
  </a>
    <a href="../app_admin/index.html" class="department">
      <img src="../../STATIC/icons/finances.png" alt="">
      <span class="department-name">Admin</span>
    </a>
  </header>
    <main class="split">
        <aside class="sidebar-cta-section">
            <button class="accented">
                <a href="../patients/sidebar.html"><i class="fa fa-search"></i></a>
            </button>
            <button class="accented">
                <i class="fa fa-cog"></i>
            </button>
            <button class="accented">
                <i class="fa fa-user"></i>
            </button>
            <button class="accented">
                <i class="fa fa-sign-out"></i>
            </button>
        </aside>
        <section class="main-content-area">
            <div class="main-cta-section">
                <button class="modal-activators" id="create_drug_modal_activator" data-modal="create_drug_modal">Create Drug</button>
            </div>
            <div class="records-part" id="recent-patients">
                <div class="body">
                  <table id="data-table" class="display" style="width:100%;margin-top:.5rem;">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Drug</th>
                            <th>Type</th>
                            <th>Available Stock</th>
                            <th>Expiry Date</th>
                            <th>Created At</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>DG230300</td>
                            <td>Paracetamol</td>
                            <td>Tablets</td>
                            <td>10,000</td>
                            <td>25-05-2023</td>
                            <td>19-03-2022</td>
                        </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <th>#</th>
                        <th>Drug</th>
                        <th>Type</th>
                        <th>Available Stock</th>
                        <th>Expiry Date</th>
                        <th>Created At</th>
                      </tr>
                    </tfoot>
                  </table>
                </div>
            </div>            
        </section>
        <aside class="preview-area" id="patient-preview">
        </aside>
    </main>


    <div class="modal" id="create_drug_modal">
        <div class="modal-header">
            <div class="flex" style="justify-content: flex-start; gap: 10px">
            <img src="../../STATIC/icons/add.png" alt="" style="inline-size: 28px; block-size: 28px" />
            <h3 style="font-size: 20px">Create New Drug</h3>
            </div>
        </div>
        <div class="modal-body">
            <div class="modal-section">
            <div class="section-label">
                <small>Drug Information</small>
            </div>
            <div class="section-content">
                <form action="">
                <div class="section-content-row flex flex-gap-40">
                    <div class="form-control flex flex-column">
                    <label for="">Drug Name</label>
                    <input class="input" type="text" />
                    </div>
                    <div class="form-control flex flex-column">
                        <label for="">Category</label>
                        <select name="category" class="input">
                            <option value="tablet">Tablet</option>
                            <option value="syrap">Syrap</option>
                            <option value="injectible">Injectible</option>
                            <option value="cream">Cream</option>
                        </select>
                        </div>
                    <div class="form-control flex flex-column">
                    <label for="">Manufacturer</label>
                    <input class="input" type="text" />
                    </div>
                    <div class="form-control flex flex-column">
                    <label for="">Expiry Date</label>
                    <input class="input" type="date" />
                    </div>
                </div>
                </form>
            </div>
            </div>
            <div class="modal-section">
            <div class="section-label">
                <small>Stock Information</small>
            </div>
            <div class="section-content">
                <form action="">
                <div class="section-content-row flex flex-gap-40">
                    <div class="form-control flex flex-column">
                    <label for="">Stock Purchased</label>
                    <input class="input" type="text" />
                    </div>
                    <div class="form-control flex flex-column">
                    <label for="">Stock Left</label>
                    <input class="input" type="text" />
                    </div>
                    <div class="form-control flex flex-column">
                    <label for="">Stock Expired</label>
                    <input class="input" type="text" />
                    </div>
                    <div class="form-control flex flex-column">
                    <label for="">Stock Not Expired</label>
                    <input class="input" type="text" />
                    </div>
                </div>
                </form>
            </div>
            </div>
            <div class="modal-section">
            <div class="section-label">
                <small>Supplier Information</small>
            </div>
            <div class="section-content">
                <form action="">
                  <div class="section-content-row flex flex-gap-40">
                      <div class="form-control flex flex-column">
                        <label for="">Supplier Name</label>
                        <select name="supplier" class="input" id="supplier_name">
                            <option value="Rakesh">Rakesh Pharma</option>
                            <option value="Darlington">Darlington</option>
                            <option value="Neutophiles">Neutophiles</option>
                        </select>
                      </div>
                      <div class="form-control flex flex-column">
                      </div>
                      <div class="form-control flex flex-column">
                      </div>
                      <div class="form-control flex flex-column">
                      </div>
                  </div>
                </form>
            </div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="form-control">
            <img class="cancel" src="../../STATIC/icons/cancel.png" alt="" />
            <img class="save" src="../../STATIC/icons/save.png" alt="" />
            </div>
        </div>
    </div>

    <div class="modal" id="create_visit_modal">
        <div class="modal-header">
          <div class="flex" style="justify-content: flex-start; gap: 10px">
            <img src="../../STATIC/icons/visits.svg" alt="" style="inline-size: 28px; block-size: 28px" />
            <h3 style="font-size: 20px">Create Visit</h3>
          </div>
        </div>
        <div class="modal-body">
          <div class="modal-section">
            <div class="section-label">
              <small>Patient Information</small>
            </div>
            <div class="section-content">
              <form action="">
                <div class="flex flex-gap-40">
                  <div class="form-control flex flex-column">
                    <label for="">First Name</label>
                    <input class="input" type="text" />
                  </div>
                  <div class="form-control flex flex-column">
                    <label for="">Middle Name</label>
                    <input class="input" type="text" />
                  </div>
                  <div class="form-control flex flex-column">
                    <label for="">Last Name</label>
                    <input class="input" type="text" />
                  </div>
                  <div class="form-control flex flex-column">
                    <div class="patient-image flex">
                      <img src="../../STATIC/images/user.png" alt="" />
                    </div>
                  </div>
                </div>
                <div class="flex flex-gap-40">
                  <div class="form-control flex flex-column">
                    <label for="">National ID No.</label>
                    <input class="input" type="text" />
                  </div>
                  <div class="form-control flex" style="gap: 20px">
                    <div class="flex flex-column" style="flex: 1">
                      <label for="">Age</label>
                      <input class="input" type="text" />
                    </div>
                    <div class="flex flex-column" style="flex: 2">
                      <label for="">Date of Birth</label>
                      <input class="input" type="date" />
                    </div>
                  </div>
                  <div class="form-control flex flex-column">
                    <label for="">Gender</label>
                    <select name="gender" class="input">
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                    </select>
                  </div>
                  <div class="form-control flex flex-column">
                    <label for="">Patient ID</label>
                    <input class="input" type="text" value="MEDT00001" disabled />
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="modal-section">
            <div class="section-label">
              <small>Visit</small>
            </div>
            <div class="section-content">
              <form action="">
                <div class="section-content-row flex flex-gap-40">
                  <div class="form-control flex flex-column">
                    <label for="">Visit Date</label>
                    <input class="input" type="date" />
                  </div>
                  <div class="form-control flex flex-column">
                    <label for="">Category</label>
                    <select name="category" class="input">
                      <option value="consultation">Consultation</option>
                      <option value="self request">Self Request</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <div class="form-control flex flex-column">
                    <label for="">Doctor Specialty</label>
                    <select name="specialty" class="input">
                      <option value="gynacology">Gynacology</option>
                      <option value="urology">Urology</option>
                      <option value="cardiology">Cardiology</option>
                      <option value="generalDoctor">General Doctor</option>
                    </select>
                  </div>
                  <div class="form-control flex flex-column">
                    <label for="">To See Doctor</label>
                    <select name="fullname" class="input">
                      <option value="Muludiang Emmanuel">Dr. Muludiang Emmanuel</option>
                      <option value="Mugisa Phillip">Dr. Mugisa Phillip</option>
                      <option value="Barbra B">Dr. Barbra B</option>
                      <option value="Peter P">Dr. Peter S</option>
                      <option value="Mulondo Caxton">Dr. Mulondo Caxton</option>
                      <option value="Abdoulanziz Ally">Dr. Abdoulanziz Ally</option>
                    </select>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="modal-section">
            <div class="section-label">
              <small>Billing</small>
            </div>
            <div class="section-content">
              <form action="">
                <div class="section-content-row flex flex-gap-40">
                  <div class="form-control flex flex-column">
                    <label for="">Billing Mode</label>
                    <select name="billingMode" class="input">
                      <option value="cash">Cash</option>
                      <option value="account">Account</option>
                      <option value="insurance">Insurance</option>
                    </select>
                  </div>
                  <div class="form-control flex flex-column">
                    <label for="">Bill</label>
                    <input class="input" type="text" />
                  </div>
                  <div class="form-control flex flex-column" style="visibility: hidden;">
                  </div>
                  <div class="form-control flex flex-column" style="visibility: hidden;">
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="form-control">
            <img class="cancel" src="../../STATIC/icons/cancel.png" alt="" />
            <img class="save" src="../../STATIC/icons/save.png" alt="" />
          </div>
        </div>
    </div>
</body>



<script>
  // Clear patient on preview
  const clearPatientOnPreview = (patient) => {
    const previewArea = document.querySelector("#patient-preview");
    const previewContent = "";
    previewArea.innerHTML = previewContent;

  }
  // On page load, clear preview
  clearPatientOnPreview();

  // Load patient on preview
  const loadPatientOnPreview = (patient) => {
    const previewArea = document.querySelector("#patient-preview");
    const previewContent = `
    <div class="img-wrapper">
        <img src="../../STATIC/images/user.png" alt="">
    </div>
    <div class="details">
        <div class="detail-group">
            <p class="part-title">Patient No:</p>
            <p class="part-content">${patient.id}</p>
        </div>
        <div class="detail-group">
            <p class="part-title">Full Name:</p>
            <p class="part-content">${patient.name}</p>
        </div>
        <div class="detail-group">
            <p class="part-title">NIN:</p>
            <p class="part-content">CM2REK234423MFC</p>
        </div>
        <div class="detail-group">
            <p class="part-title">Phone:</p>
            <p class="part-content">+256728463968</p>
        </div>
        <div class="detail-group">
            <p class="part-title">Bill Mode:</p>
            <p class="part-content">Insurance</p>
        </div>
        <div class="detail-group">
            <p class="part-title">Company:</p>
            <p class="part-content">ICEA Lion</p>
        </div>
        <div class="detail-group">
            <p class="part-title">Gender:</p>
            <p class="part-content">${patient.gender}</p>
        </div>
        <div class="detail-group">
            <p class="part-title">Age:</p>
            <p class="part-content">${patient.age}</p>
        </div>
        <div class="detail-group">
            <p class="part-title">Visits:</p>
            <p class="part-content">14</p>
        </div>
    </div>
    <div class="cta_area">
        <button onclick="triggerEditPatientModal({id:${parseInt(patient.id)}})"  class="modal-activators">Edit Detials</button>
        <button onclick="triggerCreateVisitModal()" class="modal-activators">Create Visit</button>
    </div>
    `;
    previewArea.innerHTML = previewContent;

  }

  // Change patient on prview
  const patientRows = document.querySelector("tbody").querySelectorAll("tr");
  patientRows.forEach(patientRow => patientRow.addEventListener("click", (event) => {
    if(event.target.parentElement.tagName === "TR"){
      const patient = {
        id:event.target.parentElement.querySelectorAll("td")[0].textContent,
        name:event.target.parentElement.querySelectorAll("td")[1].textContent,
        age:event.target.parentElement.querySelectorAll("td")[3].textContent,
        visit:event.target.parentElement.querySelectorAll("td")[4].textContent,
        gender:event.target.parentElement.querySelectorAll("td")[2].textContent
      }
    loadPatientOnPreview(patient);
    }
  }));


  // Set up your table
  let table = $('#data-table').DataTable();

  // Signout
  const signoutBtn = document.querySelector('.fa-sign-out');

  signoutBtn.addEventListener('click', (event) => {
    window.location.href = "../auth/index.html";
  });



  // Billing
  // Display field for insurance company
  // When insurance is selected as the payment mode

  const billingMethodsDropdown = document.querySelector("#billing_methods");
  billingMethodsDropdown.addEventListener("change", function() {
    const selectedOption = billingMethodsDropdown.value;
    if(selectedOption === "insurance"){
      // The more elegant way causes the billing mode field to overflow
      document.querySelectorAll(".to_billing_company")[0].classList.remove("visibility-hidden");
      document.querySelectorAll(".to_billing_company")[1].classList.remove("visibility-hidden");
    }else{
      // The more elegant way causes the billing mode field to overflow
      document.querySelectorAll(".to_billing_company")[0].classList.add("visibility-hidden");
      document.querySelectorAll(".to_billing_company")[1].classList.add("visibility-hidden");
    }
});


</script>
<script src="../../STATIC/js/modals.js"></script>

</html>